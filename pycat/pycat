#!/usr/bin/env python

import argparse

parser = argparse.ArgumentParser(description="print some files to stdout")
parser.add_argument("--version", action="version", version="%(prog)s 0.1.0")
parser.add_argument("files", nargs="+", help="files to cat")
parser.add_argument(
    "--number",
    "-n",
    action="store_const",
    const=True,
    default=False,
    help="print line numbers",
)

args = parser.parse_args()
files = args.files
print_line_numbers = args.number


# gods this is getting messy
def print_files(files):
    for file in files:
        with open(file, "r") as f:

            # check for printing line numbers
            if print_line_numbers:
                count = 0
                for line in f:
                    count += 1
                    stripped_line = line.strip("\n")
                    print(f"{count}\t{stripped_line}")
            else:
                print(f.read())


print_files(files)
